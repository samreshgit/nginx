pipeline {
    agent any
	stages {
        stage('git-pull') {
            steps {
				git branch: "${branchName}", credentialsId: 'github_id', url: 'https://github.com/samreshgit/nginx.git'
			}
		}
		stage("DockerImage-ECRPush") {
			steps {
				sh "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws/z5k2d8b9"
				sh "docker build -t myrepo ."
				sh "docker tag myrepo:latest public.ecr.aws/z5k2d8b9/myrepo:latest"
				sh "docker push public.ecr.aws/z5k2d8b9/myrepo:latest"
      }
    }
	}
	}
